# Artifact Description

**クレジット**：

* 大槻亮太
　改変対象とするOSSの提案.また不具合についての相談

## 概要：{関数の追加}

* [vim](https://github.com/oss-experiment-uec/2024-a2110013-vim.git)
  + VimとはViという世界でも広く使われているテキストエディタの拡張版であり,Viとは多くのLinuxOSに標準搭載されている人気の玄人向けテキストエディタである.
* toradiansという度数法で与えられた角度を弧度法に変換する関数を追加した.なお,すでに実装されている関数については[日本語ドキュメント](https://vim-jp.org/vimdoc-ja/usr_41.html)より確認できる.

## クイックスタート


* Dockerイメージをpullしてrunする手順を具体的に示す．

```
docker pull kouki10glow/2024-a2110013-vim
docker run  --platform linux/amd64 -it --rm --name console kouki10glow/2024-a2110013-vim
```

* コンテナの中に入った後，最低限の動作チェックを行う方法を示す．．

```
vim test
```
以上のコマンドを行うことで operation test と書かれたtestというファイルが表示される.編集画面から戻るには:qまたは:wqとコマンドラインで入力してENTERをする.

## 評価手順
1. リポジトリの中のsrcというフォルダに移動する

```
cd src
```

を実行するとフォルダsrcに移動する.
<br/>


2.test.vimというファイルを開く
```
vim test.vim
```
を実行するとtest.vimの編集画面に移動する.test.vim には  
echo toradians(45.0)  
echo toradians(180.0)  
と書かれている.
<br/>

3.関数を実行する  
test.vimにて
```
:source %
```
とコマンドラインで入力すると  
pi * 0.250000                                                            
pi * 1.000000  
と出力される.編集画面から戻るにはクイックスタートと同様に:qまたは:wqと入力してENTERする.ただしファイルに変更を加えた場合:wqを入力しなければ戻れない.  
ファイルを編集するにはコマンドラインに何も入力していない状態でiを入力することでINSERTと表示されて編集することができる.escを押すことでノーマルモードに戻ることができる.

4.追加したコードを確認する.  
今回改変を加えた点はtestやtest.vimを追加した以外にはディレクトリsrcにあるevalfunc.cに変更を加えた.  
test.vimの編集画面から戻り,ディレクトリsrcより
```
vim evalfunc.c
```
と入力する.  
変更した点としてはevalfunc.cの190行,2918から2919行,11930から11949行である.  
190行ではプロトタイプ宣言を行っている.  
2918から2919行では関数を定義する構造体funcentry_Tにtoradiansを登録した.  
11930から11949行ではtoradiansを実装した.ただし内蔵関数は頭にfをつける様になっているためそれに従った.  
argvarsは引数,rettvは返り値を格納する構造体である.toradiansは与えられた引数を180.0で割り,その値とpiの積を文字列として返す関数である.  

## 制限と展望
当初は既に実装されているabs関数など他の関数の実装方法にならって実装する予定だったが,うまく実装できなかったため自分なりに考えて実装した.    
また,時間に余裕があれば辞書操作についてなど計算以外の関数についても実装を行いたかった.

## 更なる使い方（オプション）
数学についての文書を作成する際に度数法ではなく弧度法を利用したい場合もあると考えられるため,そのような場合に今回実装した関数は便利であると考えられる.
